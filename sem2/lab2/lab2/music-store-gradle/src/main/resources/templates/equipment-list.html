<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Каталог оборудования</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-guitar"></i> Каталог оборудования</h1>
            <nav class="navbar">
                <a href="/web/"><i class="fas fa-home"></i> Главная</a>
                <a href="/web/equipment" class="active"><i class="fas fa-list"></i> Каталог</a>
                <a href="/web/equipment/add"><i class="fas fa-plus"></i> Добавить</a>
                <a href="/web/stats"><i class="fas fa-chart-bar"></i> Статистика</a>
            </nav>
        </header>

        <main class="main-content">
            <div class="search-section">
                <form th:action="@{/web/equipment/search}" method="get" class="search-form">
                    <div class="search-input-group">
                        <input type="text" name="keyword" 
                               th:value="${searchKeyword}" 
                               placeholder="Поиск по названию...">
                        <select name="categoryId" th:value="${selectedCategoryId}">
                            <option value="">Все категории</option>
                            <option th:each="category : ${categories}"
                                    th:value="${category.id}"
                                    th:text="${category.name}">
                            </option>
                        </select>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-search"></i> Найти
                        </button>
                        <a href="/web/equipment" class="btn btn-secondary">
                            <i class="fas fa-redo"></i> Сбросить
                        </a>
                    </div>
                </form>
            </div>

            <div class="table-container">
                <table class="equipment-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Название</th>
                            <th>Тип</th>
                            <th>Бренд</th>
                            <th>Категория</th>
                            <th>Цена</th>
                            <th>Количество</th>
                            <th>Стоимость</th>
                            <th>Действия</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="equipment : ${equipmentList}">
                            <td th:text="${equipment.id}">1</td>
                            <td th:text="${equipment.name}">Название</td>
                            <td th:text="${equipment.type}">Тип</td>
                            <td th:text="${equipment.brand}">Бренд</td>
                            <td>
                                <span class="category-badge" 
                                      th:if="${equipment.category != null}"
                                      th:text="${equipment.category.name}">
                                    Категория
                                </span>
                            </td>
                            <td th:text="${'$' + #numbers.formatDecimal(equipment.price, 1, 2, 'POINT')}">
                                $0.00
                            </td>
                            <td>
                                <span th:classappend="${equipment.quantity > 10 ? 'text-success' : 
                                                      equipment.quantity > 5 ? 'text-warning' : 'text-danger'}"
                                      th:text="${equipment.quantity}">
                                    0
                                </span>
                            </td>
                            <td th:text="${'$' + #numbers.formatDecimal(equipment.totalValue, 1, 2, 'POINT')}">
                                $0.00
                            </td>
                            <td class="actions">
                                <a th:href="@{/web/equipment/edit/{id}(id=${equipment.id})}" 
                                   class="btn btn-sm btn-outline">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a th:href="@{/web/equipment/delete/{id}(id=${equipment.id})}" 
                                   class="btn btn-sm btn-danger"
                                   onclick="return confirm('Удалить оборудование?')">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <div th:if="${#lists.isEmpty(equipmentList)}" class="empty-state">
                    <i class="fas fa-box-open fa-3x"></i>
                    <h3>Оборудование не найдено</h3>
                    <p>Добавьте новое оборудование или измените параметры поиска</p>
                    <a href="/web/equipment/add" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Добавить оборудование
                    </a>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>© 2024 Музыкальный Магазин. Всего позиций: 
                <span th:text="${#lists.size(equipmentList)}">0</span>
            </p>
        </footer>
    </div>
</body>
</html>