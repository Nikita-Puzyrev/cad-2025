<!DOCTYPE html>
<html lang="ru" 
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Редактировать оборудование</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-edit"></i> Редактировать оборудование</h1>
            <nav class="navbar">
    <a href="/web/" class="active"><i class="fas fa-home"></i> Главная</a>
    <a href="/web/equipment"><i class="fas fa-list"></i> Каталог</a>
    <a href="/web/equipment/add" sec:authorize="hasRole('USER')"><i class="fas fa-plus"></i> Добавить</a>
    <a href="/web/equipment/edit/1" sec:authorize="hasRole('MODERATOR')" style="display: none;">Скрытая ссылка</a>
    <a href="/web/stats" sec:authorize="isAuthenticated()"><i class="fas fa-chart-bar"></i> Статистика</a>
    <a href="/api/equipment" target="_blank"><i class="fas fa-code"></i> API</a>
</nav>
        </header>

        <main class="main-content">
            <div class="form-container">
                <form th:action="@{/web/equipment/edit/{id}(id=${equipment.id})}" 
                      th:object="${equipment}" method="post" class="equipment-form">
                    
                    <div th:if="${error}" class="alert alert-danger">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span th:text="${error}">Ошибка</span>
                    </div>
                    
                    <div class="form-info">
                        <p><strong>ID:</strong> <span th:text="${equipment.id}">1</span></p>
                        <p><strong>Добавлено:</strong> 
                            <span th:text="${#temporals.format(equipment.addedDate, 'dd.MM.yyyy HH:mm')}">
                                20.01.2024 10:30
                            </span>
                        </p>
                    </div>
                    
                    <div class="form-group">
                        <label for="name">
                            <i class="fas fa-guitar"></i> Название *
                        </label>
                        <input type="text" id="name" th:field="*{name}" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="type">
                                <i class="fas fa-tag"></i> Тип *
                            </label>
                            <input type="text" id="type" th:field="*{type}" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="brand">
                                <i class="fas fa-trademark"></i> Бренд *
                            </label>
                            <input type="text" id="brand" th:field="*{brand}" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="price">
                                <i class="fas fa-dollar-sign"></i> Цена *
                            </label>
                            <input type="number" id="price" th:field="*{price}" 
                                   step="0.01" min="0" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="quantity">
                                <i class="fas fa-box"></i> Количество *
                            </label>
                            <input type="number" id="quantity" th:field="*{quantity}" 
                                   min="0" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="category">
                            <i class="fas fa-folder"></i> Категория
                        </label>
                        <select id="category" th:field="*{category}">
                            <option value="">Без категории</option>
                            <option th:each="category : ${categories}"
                                    th:value="${category.id}"
                                    th:text="${category.name}">
                            </option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="description">
                            <i class="fas fa-align-left"></i> Описание
                        </label>
                        <textarea id="description" th:field="*{description}" rows="3"></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Сохранить изменения
                        </button>
                        <a href="/web/equipment" class="btn btn-secondary">
                            <i class="fas fa-times"></i> Отмена
                        </a>
                        <a th:href="@{/web/equipment/delete/{id}(id=${equipment.id})}" 
                           class="btn btn-danger"
                           onclick="return confirm('Вы уверены, что хотите удалить это оборудование?')">
                            <i class="fas fa-trash"></i> Удалить
                        </a>
                    </div>
                </form>
            </div>
        </main>

        <footer class="footer">
            <p>© 2024 Музыкальный Магазин. Редактирование оборудования</p>
        </footer>
    </div>
</body>
</html>